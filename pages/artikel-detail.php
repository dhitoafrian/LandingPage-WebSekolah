<?php

$page_title = 'Detail Artikel';
include '../src/includes/header.php';

// Simulasi data artikel (nanti diganti dengan database)
$all_articles = [
    [
        'id' => 1,
        'title' => 'Berdzikir dengan Ikhlas',
        'author' => 'Kumara Adji Kusuma',
        'date' => '22 Nov 2025',
        'read_time' => '3 menit',
        'category' => 'Keagamaan',
        'image' => 'https://images.unsplash.com/photo-1456513080510-7bf3a84b82f8?w=1200&h=800&fit=crop',
        'description' => 'Dzikir adalah salah satu amalan yang sangat dianjurkan dalam Islam. Namun, dzikir yang dilakukan dengan ikhlas akan memberikan keberkahan yang luar biasa.',
        'content' => 'Dzikir merupakan salah satu ibadah yang memiliki kedudukan tinggi dalam Islam. Rasulullah SAW bersabda, "Perumpamaan orang yang berdzikir kepada Rabb-nya dengan orang yang tidak berdzikir adalah seperti orang yang hidup dengan orang yang mati." (HR. Bukhari)

Keikhlasan dalam berdzikir adalah kunci utama diterimanya amalan kita. Dzikir yang dilakukan dengan hati yang hadir dan penuh keikhlasan akan membawa ketenangan jiwa dan mendekatkan diri kepada Allah SWT.

Beberapa manfaat dzikir dengan ikhlas:
1. Menghilangkan kegelisahan dan kecemasan
2. Mendatangkan ketenangan hati
3. Meningkatkan kualitas ibadah
4. Mendekatkan diri kepada Allah SWT
5. Mendapat pahala yang berlipat ganda

Para ulama menyebutkan bahwa dzikir yang paling utama adalah dzikir yang dilakukan dengan lisan, hati, dan perbuatan. Ketiga komponen ini harus selaras agar dzikir kita menjadi sempurna.

Mari kita tingkatkan kualitas dzikir kita dengan senantiasa mengingat Allah dalam setiap keadaan, baik dalam suka maupun duka. Semoga Allah menerima amalan kita dan menjadikan kita termasuk golongan orang-orang yang selalu berdzikir kepada-Nya.'
    ],
    [
        'id' => 2,
        'title' => 'Ketika Berbuat Salah Terasa Aneh',
        'author' => 'Ahmad Fauzi',
        'date' => '20 Nov 2025',
        'read_time' => '5 menit',
        'category' => 'Kehidupan',
        'image' => 'https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=1200&h=800&fit=crop',
        'description' => 'Perasaan tidak nyaman saat berbuat salah adalah tanda hati nurani yang masih hidup. Ini adalah nikmat Allah yang harus kita syukuri.',
        'content' => 'Pernahkah Anda merasakan perasaan aneh, tidak nyaman, atau gelisah setelah melakukan kesalahan? Selamat! Itu adalah tanda bahwa hati nurani Anda masih hidup dan sehat.

Dalam Islam, perasaan ini disebut dengan "qalbu salim" atau hati yang sehat. Rasulullah SAW bersabda, "Ketahuilah bahwa dalam jasad itu ada segumpal daging. Jika ia baik, maka baiklah seluruh jasad. Jika ia rusak, maka rusaklah seluruh jasad. Ketahuilah bahwa ia adalah hati." (HR. Bukhari & Muslim)

Perasaan tidak nyaman saat berbuat salah adalah alarm alami yang Allah berikan kepada kita sebagai peringatan. Ini adalah kesempatan untuk segera bertaubat dan kembali ke jalan yang benar.

Namun, kita harus waspada. Jika perasaan ini mulai menghilang dan kita merasa nyaman dengan kesalahan, maka itu adalah tanda bahaya. Hati kita mulai mengeras dan perlu segera "dipulihkan" dengan:

1. Memperbanyak dzikir dan membaca Al-Quran
2. Beristighfar dan bertaubat
3. Memperbanyak sedekah
4. Bergaul dengan orang-orang sholeh
5. Menjauh dari maksiat

Jaga hati kita agar selalu peka terhadap kebenaran dan kesalahan. Karena hati yang sehat adalah kunci kebahagiaan dunia dan akhirat.'
    ],
    [
        'id' => 3,
        'title' => 'Puasa Melawan Angkuh Diri',
        'author' => 'Haedir Nashir',
        'date' => '18 Nov 2025',
        'read_time' => '4 menit',
        'category' => 'Keagamaan',
        'image' => 'https://images.unsplash.com/photo-1434030216411-0b793f4b4173?w=1200&h=800&fit=crop',
        'description' => 'Puasa bukan hanya menahan lapar dan haus, tetapi juga menahan hawa nafsu dan sifat angkuh yang ada dalam diri kita.',
        'content' => 'Puasa dalam Islam memiliki makna yang sangat dalam. Bukan sekadar menahan lapar dan haus, tetapi juga melatih jiwa untuk mengendalikan hawa nafsu, termasuk sifat angkuh atau takabur.

Sifat angkuh adalah salah satu penyakit hati yang paling berbahaya. Rasulullah SAW bersabda, "Tidak akan masuk surga orang yang dalam hatinya ada kesombongan sebesar biji sawi." (HR. Muslim)

Puasa mengajarkan kita untuk:

1. Merendahkan Diri
Saat berpuasa, kita merasakan lapar dan haus seperti orang-orang yang kurang mampu. Ini mengingatkan kita bahwa kita semua sama di hadapan Allah.

2. Mengendalikan Hawa Nafsu
Dengan menahan makan, minum, dan syahwat di siang hari, kita melatih diri untuk mengendalikan keinginan-keinginan duniawi yang bisa menjerumuskan.

3. Meningkatkan Empati
Merasakan lapar membuat kita lebih berempati kepada mereka yang sehari-hari kesulitan mendapat makanan.

4. Fokus pada Spiritual
Dengan perut yang tidak penuh, pikiran kita menjadi lebih jernih untuk beribadah dan mendekatkan diri kepada Allah.

Imam Al-Ghazali berkata, "Puasa adalah tameng dari api neraka dan pelindung dari dosa." Mari kita manfaatkan puasa bukan hanya untuk ibadah ritual, tetapi juga untuk membersihkan jiwa dari sifat-sifat tercela, terutama kesombongan dan keangkuhan.

Dengan puasa yang benar, insyaAllah kita akan menjadi pribadi yang lebih rendah hati, penuh kasih sayang, dan selalu bersyukur atas nikmat Allah.'
    ],
    [
        'id' => 4,
        'title' => 'Islam, Muhammadiyah, dan Seni',
        'author' => 'Dr. Syamsul Arifin',
        'date' => '15 Nov 2025',
        'read_time' => '6 menit',
        'category' => 'Budaya',
        'image' => 'https://images.unsplash.com/photo-1519452635265-7b1fbfd1e4e0?w=1200&h=800&fit=crop',
        'description' => 'Seni dalam perspektif Islam dan Muhammadiyah memiliki peran penting dalam dakwah dan pembentukan karakter generasi muda.',
        'content' => 'Seni memiliki peran penting dalam membentuk karakter, estetika, dan wawasan generasi muda. Muhammadiyah melihat seni sebagai sarana dakwah yang bisa menyampaikan nilai-nilai Islam secara halus dan kreatif.
Beberapa contoh peran seni:
1. Dakwah melalui musik dan kaligrafi
2. Pembentukan karakter kreatif dan disiplin
3. Pengembangan rasa estetik yang selaras dengan nilai agama'
    ],
    [
        'id' => 5,
        'title' => 'Pentingnya Literasi Digital di Era Modern',
        'author' => 'Siti Nurhaliza, M.Pd',
        'date' => '12 Nov 2025',
        'read_time' => '7 menit',
        'category' => 'Pendidikan',
        'image' => 'https://images.unsplash.com/photo-1488190211105-8b0e65b80b4e?w=1200&h=800&fit=crop',
        'description' => 'Di era digital ini, literasi digital menjadi keterampilan wajib yang harus dimiliki siswa untuk menghadapi tantangan masa depan.',
        'content' => 'Literasi digital adalah kemampuan untuk memahami, menggunakan, dan menilai informasi digital secara kritis. Generasi muda harus mampu memanfaatkan teknologi dengan bijak.
Beberapa manfaat literasi digital:
1. Mempermudah pembelajaran
2. Meningkatkan produktivitas
3. Mengurangi risiko informasi palsu
4. Membuka peluang karier di era digital'
    ],
    [
        'id' => 6,
        'title' => 'Membangun Karakter Melalui Kegiatan Ekstrakurikuler',
        'author' => 'Budi Santoso, S.Pd',
        'date' => '10 Nov 2025',
        'read_time' => '5 menit',
        'category' => 'Pendidikan',
        'image' => 'https://images.unsplash.com/photo-1427504494785-3a9ca7044f45?w=1200&h=800&fit=crop',
        'description' => 'Kegiatan ekstrakurikuler memiliki peran vital dalam membentuk karakter dan soft skill siswa yang tidak bisa didapat di kelas.',
        'content' => 'Ekstrakurikuler membantu siswa mengembangkan kemampuan sosial, kepemimpinan, dan kerja tim. Aktivitas di luar kelas memperkuat karakter dan membentuk mental yang tangguh.
Contoh kegiatan:
1. Organisasi siswa
2. Kegiatan olahraga
3. Kegiatan seni dan budaya
4. Kegiatan ilmiah dan teknologi'
    ]
];

// Get artikel berdasarkan ID
$id = isset($_GET['id']) ? (int)$_GET['id'] : 1;
$artikel = null;

foreach ($all_articles as $item) {
    if ($item['id'] === $id) {
        $artikel = $item;
        break;
    }
}

// Jika artikel tidak ditemukan, redirect
if (!$artikel) {
    header('Location: artikel.php');
    exit;
}

// Sidebar Search
$sidebar_search = isset($_GET['search']) ? trim($_GET['search']) : '';
$search_results = [];

if (!empty($sidebar_search)) {
    foreach ($all_articles as $item) {
        if (
            stripos($item['title'], $sidebar_search) !== false ||
            stripos($item['description'], $sidebar_search) !== false ||
            stripos($item['content'], $sidebar_search) !== false
        ) {
            $search_results[] = $item;
        }
    }
}

// Artikel Lainnya (exclude current)
$other_articles = array_filter($all_articles, function ($item) use ($id) {
    return $item['id'] !== $id;
});
?>

<script src="https://cdn.tailwindcss.com"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
<script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap');

    * {
        font-family: 'Inter', sans-serif;
    }

    .line-clamp-2 {
        display: -webkit-box;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .line-clamp-3 {
        display: -webkit-box;
        -webkit-line-clamp: 3;
        -webkit-box-orient: vertical;
        overflow: hidden;
    }

    .prose {
        line-height: 1.8;
    }

    .prose p {
        margin-bottom: 1.25rem;
    }

    /* Badge category colors */
    .badge-keagamaan {
        background: #dbeafe;
        color: #1e40af;
    }

    .badge-kehidupan {
        background: #fef3c7;
        color: #92400e;
    }

    .badge-budaya {
        background: #f3e8ff;
        color: #6b21a8;
    }

    .badge-pendidikan {
        background: #dcfce7;
        color: #166534;
    }

    .badge-teknologi {
        background: #fce7f3;
        color: #9f1239;
    }

    .badge-prestasi {
        background: #fed7aa;
        color: #9a3412;
    }

    .badge-tips {
        background: #cffafe;
        color: #0e7490;
    }

    .badge-info {
        background: #e0e7ff;
        color: #3730a3;
    }

    /* Swiper Navigation */
    .artikelSwiper .swiper-button-next,
    .artikelSwiper .swiper-button-prev {
        color: #3b82f6;
        background: white;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    }

    .artikelSwiper .swiper-button-next:after,
    .artikelSwiper .swiper-button-prev:after {
        font-size: 20px;
    }
</style>

<section class="py-12 bg-gray-100 min-h-screen">
    <div class="container mx-auto px-4">
        <!-- Breadcrumb -->
        <div class="mb-6">
            <nav class="flex" aria-label="Breadcrumb">
                <ol class="inline-flex items-center space-x-1 md:space-x-3">
                    <li class="inline-flex items-center">
                        <a href="/Template-WebSekolah/src/index.php" class="text-gray-600 hover:text-blue-600 transition">
                            <i class="fas fa-home mr-2"></i>Home
                        </a>
                    </li>
                    <li>
                        <div class="flex items-center">
                            <span class="mx-2 text-gray-400">/</span>
                            <a href="artikel.php" class="text-gray-600 hover:text-blue-600 transition">Artikel</a>
                        </div>
                    </li>
                    <li aria-current="page">
                        <div class="flex items-center">
                            <span class="mx-2 text-gray-400">/</span>
                            <span class="text-gray-500">Detail</span>
                        </div>
                    </li>
                </ol>
            </nav>
        </div>

        <!-- Main Layout: Content + Sidebar -->
        <div class="flex flex-col lg:flex-row gap-8">

            <!-- Main Content (70%) -->
            <div class="lg:w-[70%]">
                <div class="bg-white rounded-xl shadow-lg overflow-hidden">
                    <!-- Featured Image -->
                    <img
                        src="<?= $artikel['image'] ?>"
                        alt="<?= htmlspecialchars($artikel['title']) ?>"
                        class="w-full h-96 object-cover">

                    <!-- Content -->
                    <div class="p-8 md:p-12">
                        <!-- Category Badge -->
                        <div class="mb-4">
                            <?php
                            $badge_class = 'badge-' . strtolower($artikel['category']);
                            ?>
                            <span class="text-xs font-semibold px-3 py-1.5 rounded-full <?= $badge_class ?>">
                                <i class="fas fa-tag mr-1"></i><?= $artikel['category'] ?>
                            </span>
                        </div>

                        <!-- Meta Info -->
                        <div class="flex flex-wrap gap-4 mb-6 text-sm text-gray-600">
                            <span class="flex items-center gap-2">
                                <i class="far fa-calendar text-blue-600"></i>
                                <?= $artikel['date'] ?>
                            </span>
                            <span class="flex items-center gap-2">
                                <i class="far fa-user text-blue-600"></i>
                                <?= $artikel['author'] ?>
                            </span>
                            <span class="flex items-center gap-2">
                                <i class="far fa-clock text-blue-600"></i>
                                <?= $artikel['read_time'] ?> baca
                            </span>
                        </div>

                        <!-- Title -->
                        <h1 class="text-3xl md:text-4xl font-bold text-gray-800 mb-6">
                            <?= htmlspecialchars($artikel['title']) ?>
                        </h1>

                        <!-- Description -->
                        <p class="text-xl text-gray-700 mb-8 font-medium leading-relaxed">
                            <?= htmlspecialchars($artikel['description']) ?>
                        </p>

                        <!-- Full Content -->
                        <div class="prose prose-lg max-w-none text-gray-700 leading-relaxed">
                            <?= nl2br(htmlspecialchars($artikel['content'])) ?>
                        </div>

                        <!-- Share Buttons -->
                        <div class="mt-12 pt-8 border-t border-gray-200">
                            <p class="text-gray-700 font-semibold mb-4">
                                <i class="fas fa-share-alt mr-2"></i>Bagikan artikel ini:
                            </p>
                            <div class="flex flex-wrap gap-3">
                                <a
                                    href="https://www.facebook.com/sharer/sharer.php?u=<?= urlencode($_SERVER['REQUEST_URI']) ?>"
                                    target="_blank"
                                    class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                    <i class="fab fa-facebook mr-2"></i>Facebook
                                </a>
                                <a
                                    href="https://twitter.com/intent/tweet?url=<?= urlencode($_SERVER['REQUEST_URI']) ?>&text=<?= urlencode($artikel['title']) ?>"
                                    target="_blank"
                                    class="px-4 py-2 bg-sky-500 text-white rounded-lg hover:bg-sky-600 transition">
                                    <i class="fab fa-twitter mr-2"></i>Twitter
                                </a>
                                <a
                                    href="https://wa.me/?text=<?= urlencode($artikel['title'] . ' ' . $_SERVER['REQUEST_URI']) ?>"
                                    target="_blank"
                                    class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition">
                                    <i class="fab fa-whatsapp mr-2"></i>WhatsApp
                                </a>
                                <a
                                    href="https://www.linkedin.com/sharing/share-offsite/?url=<?= urlencode($_SERVER['REQUEST_URI']) ?>"
                                    target="_blank"
                                    class="px-4 py-2 bg-blue-700 text-white rounded-lg hover:bg-blue-800 transition">
                                    <i class="fab fa-linkedin mr-2"></i>LinkedIn
                                </a>
                            </div>
                        </div>

                        <!-- Back Button -->
                        <div class="mt-8">
                            <a
                                href="artikel.php"
                                class="inline-flex items-center gap-2 px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-semibold">
                                <i class="fas fa-arrow-left"></i>
                                Kembali ke Daftar Artikel
                            </a>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sidebar (30%) -->
            <div class="lg:w-[30%]">
                <!-- Search Box -->
                <div class="bg-white rounded-xl shadow-lg p-6 mb-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-search text-blue-600"></i>
                        Cari Artikel
                    </h3>
                    <form method="GET" action="">
                        <input type="hidden" name="id" value="<?= $id ?>">
                        <div class="relative">
                            <input
                                type="text"
                                name="search"
                                value="<?= htmlspecialchars($sidebar_search) ?>"
                                placeholder="Cari artikel..."
                                class="w-full px-4 py-3 pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <button
                                type="submit"
                                class="absolute right-2 top-1/2 -translate-y-1/2 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition">
                                <i class="fas fa-search"></i>
                            </button>
                        </div>
                    </form>

                    <!-- Search Results -->
                    <?php if (!empty($sidebar_search)): ?>
                        <div class="mt-4 pt-4 border-t border-gray-200">
                            <p class="text-sm font-semibold text-gray-700 mb-3">
                                Hasil: <?= count($search_results) ?> artikel
                            </p>
                            <?php if (empty($search_results)): ?>
                                <p class="text-sm text-gray-500">Tidak ada artikel ditemukan.</p>
                            <?php else: ?>
                                <div class="space-y-3">
                                    <?php foreach ($search_results as $result): ?>
                                        <a
                                            href="artikel-detail.php?id=<?= $result['id'] ?>"
                                            class="block p-3 bg-gray-50 rounded-lg hover:bg-blue-50 transition">
                                            <h4 class="text-sm font-semibold text-gray-800 line-clamp-2 mb-1">
                                                <?= htmlspecialchars($result['title']) ?>
                                            </h4>
                                            <p class="text-xs text-gray-500">
                                                <i class="far fa-calendar mr-1"></i><?= $result['date'] ?>
                                            </p>
                                        </a>
                                    <?php endforeach; ?>
                                </div>
                            <?php endif; ?>
                        </div>
                    <?php endif; ?>
                </div>

                <!-- Artikel Terbaru -->
                <div class="bg-white rounded-xl shadow-lg p-6">
                    <h3 class="text-lg font-bold text-gray-800 mb-4 flex items-center gap-2">
                        <i class="fas fa-fire text-orange-500"></i>
                        Artikel Terbaru
                    </h3>
                    <div class="space-y-4">
                        <?php
                        $recent = array_slice($all_articles, 0, 5);
                        foreach ($recent as $item):
                        ?>
                            <a
                                href="artikel-detail.php?id=<?= $item['id'] ?>"
                                class="flex gap-3 group">
                                <img
                                    src="<?= $item['image'] ?>"
                                    alt="<?= htmlspecialchars($item['title']) ?>"
                                    class="w-20 h-20 object-cover rounded-lg">
                                <div class="flex-1">
                                    <h4 class="text-sm font-semibold text-gray-800 line-clamp-2 group-hover:text-blue-600 transition mb-1">
                                        <?= htmlspecialchars($item['title']) ?>
                                    </h4>
                                    <p class="text-xs text-gray-500">
                                        <i class="far fa-calendar mr-1"></i><?= $item['date'] ?>
                                    </p>
                                </div>
                            </a>
                        <?php endforeach; ?>
                    </div>
                </div>
            </div>
        </div>

        <!-- Artikel Lainnya dengan Swiper -->
        <?php if (!empty($other_articles)): ?>
            <div class="mt-12">
                <h2 class="text-3xl font-bold text-gray-800 mb-6 flex items-center gap-2">
                    <i class="fas fa-newspaper text-blue-600"></i>
                    Artikel Lainnya
                </h2>

                <div class="swiper artikelSwiper">
                    <div class="swiper-wrapper">
                        <?php foreach ($other_articles as $item): ?>
                            <div class="swiper-slide">
                                <a
                                    href="artikel-detail.php?id=<?= $item['id'] ?>"
                                    class="block bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-xl transition">
                                    <img
                                        src="<?= $item['image'] ?>"
                                        alt="<?= htmlspecialchars($item['title']) ?>"
                                        class="w-full h-48 object-cover">
                                    <div class="p-6">
                                        <div class="flex items-center justify-between mb-3">
                                            <?php
                                            $badge_class = 'badge-' . strtolower($item['category']);
                                            ?>
                                            <span class="text-xs font-semibold px-2 py-1 rounded-full <?= $badge_class ?>">
                                                <?= $item['category'] ?>
                                            </span>
                                            <span class="text-xs text-gray-500">
                                                <i class="far fa-calendar mr-1"></i><?= $item['date'] ?>
                                            </span>
                                        </div>
                                        <h3 class="text-lg font-bold text-gray-800 mb-3 line-clamp-2 hover:text-blue-600 transition">
                                            <?= htmlspecialchars($item['title']) ?>
                                        </h3>
                                        <p class="text-gray-600 text-sm line-clamp-3 mb-3">
                                            <?= htmlspecialchars($item['description']) ?>
                                        </p>
                                        <div class="text-xs text-gray-500">
                                            <i class="fas fa-user-circle mr-1"></i><?= $item['author'] ?>
                                            <span class="mx-2">â€¢</span>
                                            <i class="far fa-clock mr-1"></i><?= $item['read_time'] ?>
                                        </div>
                                    </div>
                                </a>
                            </div>
                        <?php endforeach; ?>
                    </div>

                    <!-- Navigation -->
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                </div>
            </div>
        <?php endif; ?>
    </div>
</section>

<script>
    // Initialize Swiper
    const swiper = new Swiper('.artikelSwiper', {
        slidesPerView: 1,
        spaceBetween: 20,
        loop: true,
        autoplay: {
            delay: 3000,
            disableOnInteraction: false,
        },
        navigation: {
            nextEl: '.swiper-button-next',
            prevEl: '.swiper-button-prev',
        },
        breakpoints: {
            640: {
                slidesPerView: 2,
                spaceBetween: 20,
            },
            1024: {
                slidesPerView: 3,
                spaceBetween: 30,
            },
        },
    });
</script>

<?php
include '../src/includes/footer.php';
?>

